modbus_controller:
  - id: modbus2_slave
    address: ${modbus2_address}
    modbus_id: modbus2
    server_registers:
      # ğŸ”µ BASE
      - address: 0
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(east).state;'
      - address: 2
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(eait).state;'

      # ğŸ”µ HC/HP
      - address: 4
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(easf01).state;'
      - address: 6
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(easf02).state;'

      # ğŸ”´ EJP
      - address: 8
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(easf01).state;'
      - address: 10
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(easf02).state;'

      # ğŸ”µâšªğŸ”´ TEMPO
      - address: 12
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(easf01).state;'
      - address: 14
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(easf02).state;'
      - address: 16
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(easf03).state;'
      - address: 18
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(easf04).state;'
      - address: 20
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(easf05).state;'
      - address: 22
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(easf06).state;'

      # âš¡ Courants
      - address: 24
        value_type: U_WORD
        read_lambda: 'return (uint16_t)id(irms1).state;'
      - address: 25
        value_type: U_WORD
        read_lambda: 'return (uint16_t)id(irms2).state;'
      - address: 26
        value_type: U_WORD
        read_lambda: 'return (uint16_t)id(irms3).state;'

      # ğŸ”Œ Tensions
      - address: 27
        value_type: U_WORD
        read_lambda: 'return (uint16_t)id(urms1).state;'
      - address: 28
        value_type: U_WORD
        read_lambda: 'return (uint16_t)id(urms2).state;'
      - address: 29
        value_type: U_WORD
        read_lambda: 'return (uint16_t)id(urms3).state;'

      # âš¡ Puissance instantanÃ©e
      - address: 30
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(sinsts).state;'
      - address: 32
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(sinst1).state;'
      - address: 34
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(sinst2).state;'
      - address: 36
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(sinst3).state;'

      # ğŸ“ˆ Puissance max
      - address: 38
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(smaxsn).state;'
      - address: 40
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(smaxsn1).state;'
      - address: 42
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(smaxsn2).state;'
      - address: 44
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(smaxsn3).state;'

      # ğŸ”’ Puissance de coupure / rÃ©fÃ©rence
      - address: 46
        value_type: U_DWORD
        read_lambda: 'return (uint32_t)id(pcoup).state;'
      - address: 48
        value_type: U_WORD
        read_lambda: 'return (uint16_t)id(pref).state;'

      # ğŸ“Š DÃ©passement
      - address: 49
        value_type: U_WORD
        read_lambda: 'return (uint16_t)id(ccasn).state;'

      # ğŸ—“ï¸ Calendrier tarifaire
      - address: 50
        value_type: U_WORD
        read_lambda: 'return (uint16_t)id(ntarf).state;'
      - address: 51
        value_type: U_WORD
        read_lambda: 'return (uint16_t)id(njourf).state;'
      - address: 52
        value_type: U_WORD
        read_lambda: 'return (uint16_t)id(njourf_plus1).state;'

      # ğŸŸ¢ Texte : Type de contrat
      - address: 53
        value_type: U_QWORD
        read_lambda: 'return strtoull(id(ngtf).state.c_str(), nullptr, 10);'

      # ğŸŸ¢ Texte : Tarif en cours
      - address: 57
        value_type: U_QWORD
        read_lambda: 'return strtoull(id(ltarf).state.c_str(), nullptr, 10);'

      # ğŸŸ¢ Texte : Profil tarifaire prÃ©vu demain
      - address: 61
        value_type: U_QWORD
        read_lambda: 'return strtoull(id(pjourf_plus1).state.c_str(), nullptr, 10);'

      # ğŸŸ¢ Texte : Jour de pointe prÃ©vu demain
      - address: 65
        value_type: U_QWORD
        read_lambda: 'return strtoull(id(ppointe).state.c_str(), nullptr, 10);'
